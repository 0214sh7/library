---
title: "座標圧縮"
permalink: /posts/compress
writer: 0214sh7
layout: library
---

init
- 数列$$A$$を与えると、クラスを$$A$$で初期化する
- このとき、$$A$$の全ての$$2$$つの要素について大小関係が維持され、かつindexの最大値が最小になるように$$A$$の各要素にindexという非負整数が割り振られる
- 計算量は$$N=\vert A \vert$$とし、$$Ο(NlogN)$$

size
- initで与えられた数列の中に含まれる値の種類数を返す
- 計算量は$$Ο(1)$$

index
- 値を与えると、その値に対応するindexを返す
- もし数列に存在しない値が与えられたら、数列に存在する値の中で、与えられた値より小さい最大の値についてのindexを返す(つまり、小さい値に寄せる)
- もし列のいかなる値よりも小さければ$$-1$$を返す
- 計算量はinitの$$N$$を用いて、$$Ο(logN)$$

value
- indexを与えると値を返す
- 範囲外なら$$0$$を返す
- 計算量は$$Ο(1)$$

[github](https://github.com/0214sh7/procon-library/blob/master/algorithm/coordinate%20compression.cpp)

~~~
class compress{
    /*
    Copyright (c) 2020 0214sh7
    https://github.com/0214sh7/library/
    */
    private:
    std::vector<int> E;
    
    public:
    void init(std::vector<long long> A){
        E.clear();
        sort(A.begin(),A.end());
        for(int i=0;i<A.size();i++){
            if(i==0 || A[i]!=A[i-1]){
                E.push_back(A[i]);
            }
        }
    }
    
    int size(){
        return (int)E.size();
    }
    
    int value(int x){
        if(0<=x && x<(int)E.size()){
            return E[x];
        }else{
            return 0;
        }
    }
    
    int index(int X){
        return (upper_bound(E.begin(),E.end(),X))-E.begin()-1;
    }
    
};
~~~